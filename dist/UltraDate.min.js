!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.UltraDate=e()}(this,function(){"use strict";var t=function(t){return t=parseInt(t,10),isNaN(parseInt(t,10))?0:t},e=function(r,n,i,a,s,o,u){if(this instanceof e)switch(this.__value=void 0,arguments.length){case 0:this.__value=new Date;break;case 1:this.__value=new Date(r);break;default:this.__value=new Date(t(r),t(n),t(i),t(a),t(s),t(o),t(u))}else switch(arguments.length){case 0:return new e;case 1:return new e(r);default:return new e(r,n,i,a,s,o,u)}return this},r="def",n=[],i={def:{get:function(t){return{}}}},a={def:{firstYear:null,longDay:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDay:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longMonth:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonth:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],smallNoon:["am","pm"],largeNoon:["AM","PM"],era:function(t){return{longName:"A.D.",shortName:"AD",alphaName:"A",year:t.getFullYear()}},eraStrict:function(t){return this.era(t)}}},s=function(t,e){return e=parseInt(e,10),(e=isNaN(e)?2:e)<2?t:(new Array(e).join("0")+t).slice(-1*e)},o=function(t){return t=void 0===t?new e:new e(t)},u=function(e){return void 0===e?(new Date).getFullYear():t(e)},h=function(t,e,r){e=parseInt(e,10),(isNaN(e)||e<0&&e>6)&&(e=4),e=0===e?0:7-e;var n=new Date(r);n.setHours(0,0,0,0);var i=n.getDay();t=parseInt(t,10),(isNaN(t)||t<0&&t>6)&&(t=1),0!==t&&(i-=t)<0&&(i+=7),i=7-(i+1);var a=(n-new Date(r.getFullYear(),0,1))/864e5+1+e+i;return 0===e?Math.ceil(a/7):Math.floor(a/7)};e.now=function(){return Date.now?Date.now():(new Date).getTime()},e.parse=function(t){return Date.parse(t)},e.UTC=function(){return Date.UTC.apply(null,[].slice.apply(arguments))},e.getISOLastWeekNum=function(t){t=u(t);var r=new e(t,11,31);return r.getISODay()<4?r.addDate(-1*r.getISODay()).getISOWeek():r.getISOWeek()},e.getUSLastWeekNum=function(t){return t=u(t),new e(t,11,31).getUSWeek()},e.getHolidays=function(t,e){return t=u(t),e=e||r,i.hasOwnProperty(e)?i[e].get(t):i.def.get(t)},e.getDefaultFormat=function(){return"yyyy/MM/dd"},e.getDuplicate=function(){return n},e.setFormatOption=function(t,e){if("string"!=typeof t||"def"===t||""===t||"[object Object]"!==Object.prototype.toString.call(e))throw new Error("Data type of the argument is incorrect");a.hasOwnProperty(t)||(a[t]={}),e.hasOwnProperty("era")&&!e.hasOwnProperty("eraStrict")&&(e.eraStrict=e.era);for(var r=Object.keys(a.def),n=0,i=r.length;n<i;n++)a[t][r[n]]=e.hasOwnProperty(r[n])?e[r[n]]:a.def[r[n]];return this},e.setHolidayOption=function(t,e){if("string"!=typeof t||"def"===t||""===t||"[object Object]"!==Object.prototype.toString.call(e))throw new Error("Data type of the argument is incorrect");if(!e.hasOwnProperty("get"))throw new Error("get() does not exist");if("[object Function]"!==Object.prototype.toString.call(e.get))throw new Error("get is not Function");return i[t]=e,this},e.setDefaultLocale=function(t){if("string"!=typeof t||""===t)throw new Error("Data type of the argument is incorrect");return r=t,this},e.prototype={constructor:e,copy:function(){return new e(this.__value)},format:function(t,e,n){if("string"!=typeof t)return t;n="string"!=typeof n||""===n?r:n;for(var i=a.hasOwnProperty(n)?a[n]:a.def,o=!0===e?i.eraStrict(this):i.era(this),u=this.getHours()<12?0:1,h={yyyy:this.getFullYear(),yy:s(this.getFullYear()),eeee:s(o.year,4),eee:s(o.year,3),ee:s(o.year),e:o.year,EEEE:1===o.year&&i.firstYear||s(o.year,4),EEE:1===o.year&&i.firstYear||s(o.year,3),EE:1===o.year&&i.firstYear||s(o.year),E:1===o.year&&i.firstYear||o.year,ggg:o.longName,gg:o.shortName,g:o.alphaName,MMMM:i.longMonth[this.getMonth()],MMM:i.shortMonth[this.getMonth()],MM:s(this.getRealMonth()),M:this.getRealMonth(),dddd:this.getOrdinalDate(),ddd:s(this.getOrdinalDate(),3),dd:s(this.getDate()),d:this.getDate(),HH:s(this.getHours()),H:this.getHours(),hh:s(this.getHours()-12*u),h:this.getHours()-12*u,mm:s(this.getMinutes()),m:this.getMinutes(),ss:s(this.getSeconds()),s:this.getSeconds(),fff:s(this.getMilliseconds(),3),f:this.getMilliseconds(),TT:i.largeNoon[u],tt:i.smallNoon[u],www:this.getDayCountsInMonth(),ww:s(this.getISOWeek()),w:this.getISOWeek(),WW:s(this.getUSWeek()),W:this.getUSWeek(),DDD:i.longDay[this.getDay()],DD:i.shortDay[this.getDay()],D:this.getISODay()},c="_____-----_____-----_____-----_____-----_____-----_____",l=(t=t.replace(/("")/g,c)).split('"'),g=new RegExp("("+Object.keys(h).join("|")+")","g"),y=0,f=l.length;y<f;y+=2)l[y]=l[y].replace(g,function(t){return h[t]});return(t=l.join("")).replace(new RegExp("("+c+")","g"),'"')},addYear:function(e){return this.setFullYear(this.getFullYear()+t(e)),this},addMonth:function(e){return this.setMonth(this.getMonth()+t(e)),this},addDate:function(e){return this.setDate(this.getDate()+t(e)),this},addHours:function(e){return this.setHours(this.getHours()+t(e)),this},addMinutes:function(e){return this.setMinutes(this.getMinutes()+t(e)),this},addSeconds:function(e){return this.setSeconds(this.getSeconds()+t(e)),this},addMilliseconds:function(e){return this.setMilliseconds(this.getMilliseconds()+t(e)),this},setRealMonth:function(e){return this.setMonth(t(e)-1),this},setDayCountsInMonth:function(t,e){if(t=parseInt(t,10),e=parseInt(e,10),isNaN(t)||isNaN(e)||e<0&&e>6)throw new Error("Data type of the argument is incorrect");this.setDate(1);var r=e-this.getDay()+1;return r+=r<1?7*t:7*(t-1),this.setDate(r),this},setISOWeekDay:function(e,r,n){if(r=parseInt(r,10),isNaN(r)||r<0&&r>6)throw new Error("Data type of the argument is incorrect");n=u(this.getFullYear()),this.setFullYear(n,0,1),r=0===r?6:r-1;var i=this.getDay()<2||this.getDay()>4?0:1;return this.setDayCountsInMonth(0,1).addDate(7*(t(e)-i)+r),this},setUSWeekDay:function(e,r,n){if(r=parseInt(r,10),isNaN(r)||r<0&&r>6)throw new Error("Data type of the argument is incorrect");n=u(this.getFullYear()),this.setFullYear(n,0,1);var i=0===this.getDay()?0:1;return this.setDayCountsInMonth(0,0).addDate(7*(t(e)-i)+r),this},setFirstDate:function(e){return this.clearTime().setFullYear(this.getFullYear(),this.getMonth()+t(e),1),this},setLastDate:function(e){return this.setFirstDate().addMonth(t(e)+1).setDate(0),this},setBeforeWeekday:function(t,e){for(;!this.isWeekday(t,e);)this.addDate(-1);return this},setAfterWeekday:function(t,e){for(;!this.isWeekday(t,e);)this.addDate(1);return this},setOrdinalDate:function(e){return this.setFullYear(this.getFullYear(),0,0),this.addDate(t(e)),this},setRoundingTime:function(e,r){if(e=t(e),[5,10,15,30,60].indexOf(e)<0)throw new Error("Data type of the argument is incorrect");this.addMilliseconds(this.getTime()%6e4*-1);var n=this.getTime()%(6e4*e);switch(this.setMilliseconds(-1*n),t(r)){case 1:0!==n&&this.addMinutes(e);break;case 2:6e4*e<=2*n&&this.addMinutes(e)}return this},clearTime:function(){return this.setHours(0,0,0,0),this},getAge:function(t){var r=void 0===t?new e:new e(t),n=this.copy().clearTime(),i=r.clearTime().getFullYear()-n.clearTime().getFullYear();return n.setFullYear(r.getFullYear()),r<n?i-=1:i},getRealMonth:function(){return this.getMonth()+1},getDayCountsInMonth:function(){return Math.ceil(this.getDate()/7)},getISOWeekWithYear:function(){var t={year:this.getFullYear(),week:this.getISOWeek()};return 0===t.week?(t.year-=1,t.week=e.getISOLastWeekNum(t.year)):t.week>e.getISOLastWeekNum(t.year)&&(t.year+=1,t.week=1),t},getISOWeek:function(){return h(1,4,this)},getUSWeek:function(){return h(0,0,this)},getISODay:function(){return 0===this.getDay()?7:this.getDay()},getOrdinalDate:function(){var t=new Date(this.getFullYear(),0,0);return(this.copy().clearTime()-t)/864e5},getLastDate:function(t){return this.copy().setLastDate(t).getDate()},getHoliday:function(t){var r=e.getHolidays(this.getFullYear(),t),n=this.format("yyyy/MM/dd");return r.hasOwnProperty(n)?r[n]:""},diff:function(t){var e=(t=o(t)).getTime()-this.getTime(),r=e>=0;r||(e*=-1);var n=0,i=0,a=0,s=0,u=0,h=0,c=0,l=0;return n=e%1e3,(u=e-n)>0&&(h=u-(i=u%6e4)),h>0&&(c=h-(a=h%36e5)),c>0&&(l=c-(s=c%864e5)),{after:r,day:l/864e5,hour:s/36e5,minute:a/6e4,second:i/1e3,ms:n}},diffMonth:function(t){return 12*(t=o(t)).getFullYear()+t.getMonth()-(12*this.getFullYear()+this.getMonth())},diffDate:function(t){return((t=o(t)).clearTime().getTime()-this.copy().clearTime().getTime())/864e5},isLeapYear:function(){var t=this.getFullYear();return t%4==0&&t%100!=0||t%400==0},isDayCountsInMonth:function(e,r){return this.getDayCountsInMonth()===t(e)&&this.getDay()===t(r)},isISOWeekDay:function(e,r){return this.getISOWeek()===t(e)&&this.getDay()===t(r)},isUSWeekDay:function(e,r){return this.getUSWeek()===t(e)&&this.getDay()===t(r)},isISOWeek:function(e){return this.getISOWeek()===t(e)},isUSWeek:function(e){return this.getUSWeek()===t(e)},isWeekday:function(e,r){switch(t(e)){case 0:return 6!==this.getDay()&&0!==this.getDay()&&!this.isHoliday(r);case 1:return 6!==this.getDay()&&0!==this.getDay();case 2:return 0!==this.getDay()&&!this.isHoliday(r);case 3:return 0!==this.getDay();case 4:return!this.isHoliday(r)}},isSameDate:function(t){return this.copy().clearTime().getTime()===o(t).clearTime().getTime()},isBeforeDate:function(t){return this.copy().clearTime()<o(t).clearTime()},isAfterDate:function(t){return this.copy().clearTime()>o(t).clearTime()},isBetween:function(t,e,r){return t=o(t),e=o(e),!0===r&&(t.clearTime(),e.clearTime().addDate(1).addMilliseconds(-1)),t<=this&&this<=e},isHoliday:function(t){return e.getHolidays(this.getFullYear(),t).hasOwnProperty(this.format("yyyy/MM/dd"))},isValid:function(){return!isNaN(this.__value.getTime())}};for(var c=Object.getOwnPropertyNames(Date.prototype),l=0,g=c.length;l<g;l++)!function(t){"constructor"!==t&&(e.hasOwnProperty(t)&&n.push(t),e.prototype[t]=function(){return Date.prototype[t].apply(this.__value,Array.prototype.slice.call(arguments))})}(c[l]);return e});